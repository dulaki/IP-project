{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class SongService {\n  constructor(http) {\n    this.http = http;\n    this.baseUrl = this.resolveBaseUrl();\n  }\n  resolveBaseUrl() {\n    const fromWindow = window.__API_BASE_URL__;\n    if (typeof fromWindow === 'string' && fromWindow.length > 0) {\n      return fromWindow;\n    }\n    return 'http://localhost:4000/api';\n  }\n  getSongs(query = {}) {\n    let params = new HttpParams();\n    Object.entries(query).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== '') {\n        params = params.set(key, String(value));\n      }\n    });\n    return this.http.get(`${this.baseUrl}/songs`, {\n      params\n    }).pipe(map(res => res.items));\n  }\n  getSong(id) {\n    return this.http.get(`${this.baseUrl}/songs/${id}`);\n  }\n  static {\n    this.ɵfac = function SongService_Factory(t) {\n      return new (t || SongService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SongService,\n      factory: SongService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["HttpParams","map","SongService","constructor","http","baseUrl","resolveBaseUrl","fromWindow","window","__API_BASE_URL__","length","getSongs","query","params","Object","entries","forEach","key","value","undefined","set","String","get","pipe","res","items","getSong","id","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\Tomo\\mooj\\IP-project\\frontend\\src\\app\\services\\song.service.ts"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, map } from 'rxjs';\nimport { Song, SongQuery } from '../models/song';\n\ninterface SongResponse {\n  count: number;\n  items: Song[];\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SongService {\n  private readonly baseUrl = this.resolveBaseUrl();\n\n  constructor(private readonly http: HttpClient) {}\n\n  private resolveBaseUrl(): string {\n    const fromWindow = (window as any).__API_BASE_URL__;\n    if (typeof fromWindow === 'string' && fromWindow.length > 0) {\n      return fromWindow;\n    }\n    return 'http://localhost:4000/api';\n  }\n\n  getSongs(query: SongQuery = {}): Observable<Song[]> {\n    let params = new HttpParams();\n    Object.entries(query).forEach(([key, value]) => {\n      if (value !== undefined && value !== null && value !== '') {\n        params = params.set(key, String(value));\n      }\n    });\n\n    return this.http\n      .get<SongResponse>(`${this.baseUrl}/songs`, { params })\n      .pipe(map((res) => res.items));\n  }\n\n  getSong(id: string): Observable<Song> {\n    return this.http.get<Song>(`${this.baseUrl}/songs/${id}`);\n  }\n}\n"],"mappings":"AAAA,SAAqBA,UAAU,QAAQ,sBAAsB;AAE7D,SAAqBC,GAAG,QAAQ,MAAM;;;AAWtC,OAAM,MAAOC,WAAW;EAGtBC,YAA6BC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,OAAO,GAAG,IAAI,CAACC,cAAc,EAAE;EAEA;EAExCA,cAAcA,CAAA;IACpB,MAAMC,UAAU,GAAIC,MAAc,CAACC,gBAAgB;IACnD,IAAI,OAAOF,UAAU,KAAK,QAAQ,IAAIA,UAAU,CAACG,MAAM,GAAG,CAAC,EAAE;MAC3D,OAAOH,UAAU;IACnB;IACA,OAAO,2BAA2B;EACpC;EAEAI,QAAQA,CAACC,KAAA,GAAmB,EAAE;IAC5B,IAAIC,MAAM,GAAG,IAAIb,UAAU,EAAE;IAC7Bc,MAAM,CAACC,OAAO,CAACH,KAAK,CAAC,CAACI,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAI;MAC7C,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAK,EAAE,EAAE;QACzDL,MAAM,GAAGA,MAAM,CAACO,GAAG,CAACH,GAAG,EAAEI,MAAM,CAACH,KAAK,CAAC,CAAC;MACzC;IACF,CAAC,CAAC;IAEF,OAAO,IAAI,CAACd,IAAI,CACbkB,GAAG,CAAe,GAAG,IAAI,CAACjB,OAAO,QAAQ,EAAE;MAAEQ;IAAM,CAAE,CAAC,CACtDU,IAAI,CAACtB,GAAG,CAAEuB,GAAG,IAAKA,GAAG,CAACC,KAAK,CAAC,CAAC;EAClC;EAEAC,OAAOA,CAACC,EAAU;IAChB,OAAO,IAAI,CAACvB,IAAI,CAACkB,GAAG,CAAO,GAAG,IAAI,CAACjB,OAAO,UAAUsB,EAAE,EAAE,CAAC;EAC3D;;;uBA5BWzB,WAAW,EAAA0B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAX7B,WAAW;MAAA8B,OAAA,EAAX9B,WAAW,CAAA+B,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}